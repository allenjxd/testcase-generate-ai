# 支付系统测试用例设计模板

## 适用产品类型
- 第三方支付平台
- 银行支付系统
- 移动支付应用
- 跨境支付系统
- 企业支付解决方案

## 使用方法
1. 复制下面的完整指令
2. 替换 `[具体支付系统类型]` 为您的产品
3. 根据实际情况调整特殊要求
4. 发送给AI执行

---

## 支付系统专用指令

```
请按照Trade模块测试用例设计的成功模式，为[具体支付系统类型]设计完整测试用例。

## 产品特点分析
支付系统具有以下典型特点，请在设计中重点考虑：

### 核心业务特点
1. **资金流转安全**：涉及真实资金流转，安全性要求极高
2. **交易一致性**：支付状态必须准确，不能出现资金丢失
3. **多方协调**：涉及用户、商户、银行、第三方等多方
4. **合规要求严格**：需要满足金融监管和反洗钱要求
5. **用户体验重要**：支付流程要简单快捷

### 技术特点
1. **高可用性**：支付服务不能中断，要求99.9%以上可用性
2. **数据一致性**：分布式环境下的数据强一致性要求
3. **幂等性处理**：重复请求不能导致重复扣款
4. **异步处理**：支付结果可能异步返回
5. **加密安全**：敏感信息传输和存储加密

## 重点测试场景建议

### P0优先级场景（核心支付功能）
1. **基础支付流程场景**
   - 覆盖：发起支付、支付处理、支付完成、通知回调
   - 维度：支付方式 × 支付金额 × 用户类型 × 商户类型
   - 重点：支付成功率、资金安全、状态一致性

2. **支付状态管理场景**
   - 覆盖：支付中、成功、失败、超时、撤销
   - 维度：支付状态 × 支付方式 × 异常类型
   - 重点：状态流转正确性、异常处理

3. **资金安全场景**
   - 覆盖：余额验证、扣款、退款、冻结、解冻
   - 维度：操作类型 × 账户类型 × 金额范围
   - 重点：资金计算准确性、操作原子性

### P1优先级场景（重要功能）
1. **支付方式场景**
   - 覆盖：银行卡、电子钱包、扫码、NFC等
   - 维度：支付方式 × 设备类型 × 网络环境
   - 重点：多种支付方式兼容性、用户体验

2. **异常处理场景**
   - 覆盖：网络异常、系统异常、银行异常、超时处理
   - 维度：异常类型 × 支付阶段 × 恢复策略
   - 重点：异常恢复能力、用户提示

3. **对账结算场景**
   - 覆盖：日终对账、差错处理、结算分润
   - 维度：对账类型 × 时间周期 × 差错类型
   - 重点：对账准确性、差错处理效率

4. **安全防护场景**
   - 覆盖：身份验证、风险控制、反欺诈、加密传输
   - 维度：安全类型 × 风险等级 × 验证方式
   - 重点：安全机制有效性、用户体验平衡

### P2优先级场景（辅助功能）
1. **查询统计场景**
   - 覆盖：交易查询、统计报表、流水导出
   - 维度：查询类型 × 时间范围 × 用户权限
   - 重点：查询准确性、性能表现

2. **系统配置场景**
   - 覆盖：支付参数、费率配置、限额设置
   - 维度：配置类型 × 生效范围 × 权限控制
   - 重点：配置管理有效性、实时生效

## 特殊验证要求

### 1. 资金安全验证
- 验证所有资金操作的原子性和一致性
- 验证重复请求的幂等性处理
- 验证资金流水的完整性和可追溯性
- 验证余额计算的准确性

### 2. 支付一致性验证
- 验证支付状态在各系统间的一致性
- 验证异步通知的可靠性和准确性
- 验证支付失败后的回滚机制
- 验证超时订单的处理机制

### 3. 性能压力验证
- 验证高并发支付场景下的系统稳定性
- 验证支付响应时间符合用户体验要求
- 验证系统在异常流量下的降级机制
- 验证数据库连接池和缓存的有效性

### 4. 安全合规验证
- 验证敏感信息的加密存储和传输
- 验证用户身份验证机制的有效性
- 验证反洗钱和风控规则的执行
- 验证审计日志的完整性和不可篡改性

### 5. 兼容性验证
- 验证不同银行接口的兼容性
- 验证不同设备和浏览器的兼容性
- 验证不同网络环境下的稳定性
- 验证第三方系统集成的稳定性

## 质量标准要求

### 用例数量预估
- 总用例数：100-130条
- P0优先级：50-65条（50%）
- P1优先级：35-45条（35%）
- P2优先级：15-20条（15%）

### 详细用例要求
- 每个场景编写2-3个详细用例
- 重点关注资金安全和异常处理用例
- 包含完整的回滚和恢复验证

### 性能要求
- 支付请求响应时间 < 3s
- 支付结果通知延迟 < 30s
- 查询操作响应时间 < 2s
- 系统可用性 > 99.9%

## 执行指令
请严格按照以上支付系统特点和要求，执行[具体支付系统类型]的测试用例设计工作。

特别注意：
1. 重点关注资金安全和数据一致性
2. 强化异常处理和恢复机制的验证
3. 确保合规性和安全性要求的验证
4. 所有用例必须基于实际功能设计

现在开始执行第一阶段：需求分析和框架设计。
```

---

## 支付系统特有场景示例

### 场景：支付幂等性
```
测试目标：验证重复支付请求的幂等性处理
覆盖维度：
- 重复类型：完全重复、部分重复、时间间隔重复
- 支付状态：处理中、已成功、已失败
- 网络环境：正常、不稳定、超时

关键验证点：
- 重复请求识别准确性
- 幂等性处理机制有效性
- 用户提示信息准确性
- 资金不会重复扣除
```

### 场景：支付回调处理
```
测试目标：验证异步支付结果通知处理
覆盖维度：
- 通知类型：成功通知、失败通知、状态变更通知
- 通知时机：即时、延迟、重试
- 网络状态：正常、异常、超时

关键验证点：
- 回调接收准确性
- 回调验签有效性
- 重复回调处理机制
- 回调失败重试机制
```

### 场景：风险控制
```
测试目标：验证支付风险控制机制
覆盖维度：
- 风险类型：金额异常、频次异常、设备异常、地域异常
- 风险等级：低风险、中风险、高风险
- 处理策略：放行、验证、拒绝、人工审核

关键验证点：
- 风险识别准确性
- 风险等级评估正确性
- 风控策略执行有效性
- 用户体验影响最小化
```

## 注意事项

1. **监管合规**：确保测试覆盖PCI DSS、反洗钱等合规要求
2. **数据保护**：注意个人信息和支付信息的保护测试
3. **跨境支付**：考虑汇率、时区、法规差异等因素
4. **移动支付**：关注移动设备特有的安全和体验问题
5. **商户服务**：包含商户入驻、费率、结算等B端功能测试
