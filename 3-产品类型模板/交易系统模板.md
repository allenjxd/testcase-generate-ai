# 交易系统测试用例设计模板

## 适用产品类型
- 股票交易系统
- 期货交易系统  
- 数字货币交易系统
- 外汇交易系统
- 衍生品交易系统

## 使用方法
1. 复制下面的完整指令
2. 替换 `[具体交易系统类型]` 为您的产品
3. 根据实际情况调整特殊要求
4. 发送给AI执行

---

## 交易系统专用指令

```
请按照Trade模块测试用例设计的成功模式，为[具体交易系统类型]设计完整测试用例。

## 产品特点分析
交易系统具有以下典型特点，请在设计中重点考虑：

### 核心业务特点
1. **交易流程复杂**：开仓、持仓、平仓、结算等多环节
2. **实时性要求高**：价格变动、订单执行、风险控制需实时响应
3. **资金安全关键**：涉及用户资金，安全性要求极高
4. **风险控制严格**：需要多层次风险管理机制
5. **数据一致性重要**：账户、持仓、盈亏数据必须准确一致

### 技术特点
1. **高并发处理**：需要处理大量并发交易请求
2. **低延迟要求**：订单执行延迟要求极低
3. **数据精度高**：金额计算精度要求严格
4. **系统稳定性**：7×24小时稳定运行
5. **接口复杂**：涉及多个外部系统集成

## 重点测试场景建议

### P0优先级场景（核心交易功能）
1. **基础交易流程场景**
   - 覆盖：开仓、持仓、平仓完整流程
   - 维度：订单类型 × 仓位模式 × 交易方向 × 止盈止损
   - 重点：交易执行准确性、资金计算正确性

2. **订单生命周期场景**
   - 覆盖：订单创建、执行、撤销、过期
   - 维度：订单状态 × 仓位模式 × 交易方向
   - 重点：订单状态管理、异常处理

3. **风险控制场景**
   - 覆盖：保证金管理、强平机制、风险预警
   - 维度：风险类型 × 仓位模式 × 触发条件
   - 重点：风险控制实时性、准确性

### P1优先级场景（重要功能）
1. **数据一致性场景**
   - 覆盖：账户余额、持仓信息、盈亏计算
   - 维度：数据类型 × 仓位模式 × 交易方向
   - 重点：多接口数据一致性、实时同步

2. **批量操作场景**
   - 覆盖：批量下单、撤单、修改、平仓
   - 维度：操作类型 × 仓位模式 × 交易方向
   - 重点：批量操作性能、原子性

3. **订单管理场景**
   - 覆盖：订单修改、撤单、查询
   - 维度：修改类型 × 仓位模式 × 交易方向
   - 重点：订单管理灵活性、实时性

4. **权限安全场景**
   - 覆盖：身份认证、操作权限、风险控制
   - 维度：安全类型 × 用户类型 × 操作类型
   - 重点：安全机制有效性、权限控制

### P2优先级场景（辅助功能）
1. **历史数据场景**
   - 覆盖：历史订单、成交、持仓、盈亏查询
   - 维度：数据类型 × 查询条件
   - 重点：数据查询准确性、性能

2. **系统配置场景**
   - 覆盖：交易参数、风险参数、系统参数
   - 维度：配置类型 × 参数范围
   - 重点：配置管理有效性、实时生效

## 特殊验证要求

### 1. 资金安全验证
- 所有涉及资金变动的操作必须精确验证
- 验证资金流水的完整性和准确性
- 确保资金计算精度符合金融标准

### 2. 实时性验证
- 验证订单执行的实时性（通常要求毫秒级）
- 验证价格更新的实时性
- 验证风险控制的实时响应

### 3. 并发性验证
- 验证高并发场景下的系统稳定性
- 验证并发操作的数据一致性
- 验证系统的负载承受能力

### 4. 精度验证
- 验证价格计算的精度（通常8位小数）
- 验证盈亏计算的准确性
- 验证手续费计算的正确性

### 5. 风险控制验证
- 验证各级风险阈值的准确性
- 验证强平机制的及时性
- 验证风险预警的有效性

## 质量标准要求

### 用例数量预估
- 总用例数：120-150条
- P0优先级：60-75条（50%）
- P1优先级：42-52条（35%）
- P2优先级：18-23条（15%）

### 详细用例要求
- 每个场景编写2-3个详细用例
- 重点关注资金安全和风险控制用例
- 包含完整的异常处理验证

### 性能要求
- 订单执行响应时间 < 100ms
- 查询操作响应时间 < 1s
- 批量操作响应时间 < 3s
- 风险控制响应时间 < 500ms

## 执行指令
请严格按照以上交易系统特点和要求，执行[具体交易系统类型]的测试用例设计工作。

特别注意：
1. 重点关注资金安全和数据准确性
2. 强化风险控制机制的验证
3. 确保实时性和性能要求的验证
4. 所有用例必须基于实际功能设计

现在开始执行第一阶段：需求分析和框架设计。
```

---

## 交易系统特有场景示例

### 场景：保证金管理
```
测试目标：验证保证金计算、占用、释放的准确性
覆盖维度：
- 仓位模式：全仓、逐仓
- 操作类型：开仓、加仓、减仓、平仓
- 杠杆倍数：不同杠杆倍数
- 市场波动：价格上涨、下跌、震荡

关键验证点：
- 保证金计算公式正确性
- 保证金实时更新准确性
- 强平触发条件准确性
- 保证金释放及时性
```

### 场景：滑点控制
```
测试目标：验证市价单滑点控制机制
覆盖维度：
- 市场状态：正常、波动、流动性不足
- 订单大小：小单、大单、超大单
- 交易方向：买入、卖出

关键验证点：
- 滑点计算准确性
- 滑点限制有效性
- 异常市场处理机制
- 用户提示准确性
```

### 场景：资金费用
```
测试目标：验证资金费用计算和收取机制
覆盖维度：
- 持仓时间：跨费用收取时点
- 持仓方向：做多、做空
- 仓位大小：不同仓位规模

关键验证点：
- 费用计算公式正确性
- 费用收取时机准确性
- 费用扣除流程正确性
- 费用记录完整性
```

## 注意事项

1. **监管合规**：确保测试覆盖相关金融监管要求
2. **数据隐私**：注意用户数据保护相关测试
3. **系统集成**：考虑与银行、清算系统的集成测试
4. **灾备恢复**：包含系统故障恢复相关测试
5. **审计追踪**：确保所有操作可追溯和审计
